<x-use
  script-src="https://cdn.jsdelivr.net/gh/PrismJS/prism@1/prism.min.js"
  style-src="https://cdn.jsdelivr.net/gh/PrismJS/prism@1/themes/prism.min.css">
</x-use>
<x-use
  script-src="https://cdn.jsdelivr.net/gh/PrismJS/prism@1/plugins/autoloader/prism-autoloader.min.js">
</x-use>
<x-audio-sound-load
  track-id="buzzer"
  src="/docs/assets/buzzer.wav"
  discard="none">
</x-audio-sound-load>

<div class="container container-fluid mx-auto">

  <h1>Sounds</h1>
  <p class="lead">
    This page has on-demand sounds configured to play
    when buttons are clicked.
  </p>

  <h2>Add sound-effects or voice-overs declaratively</h2>
  <p>
    Sounds are a little different than music. We don't loop sounds
    and they need to play on-demand. There are multiple ways to
    trigger them, but this page attaches them to a button.
  </p>

  <h3>First: Preload</h3>
  <p>
    To get the timing perfect, we have
    to pre-load all sounds for a route using the
    <x-link href="/components/x-audio-sound-load"><b>&lt;x-audio-sound-load&gt;</b></x-link>
    component. The default
    mode for sounds is load. This gets the audio ready
    to play and waits for the start command.
  </p>
  <p>
    <button class="btn btn-light" type="button"
      data-bs-toggle="collapse" data-bs-target="#loadSource"
      aria-expanded="false" aria-controls="loadSource">
      <i class="ri-code-s-slash-line"></i>
      View Route Source
    </button>
    <div class="collapse" id="loadSource">
      <x-markdown>
        <script type="text/markdown">
        ````html
        <x-view-do ...>
          <x-audio-sound-load
            track-id="buzzer"
            src="/docs/assets/buzzer.wav"
            discard="none">
          </x-audio-sound-load>
          ...
        </x-view-do>
        ````
        > We set the discard to **none** to tell the player not to discard
        the sound after it has played, so it can be played again.
        </script>
      </x-markdown>
    </div>
  </p>
  <h3 class="mt-3">Then: Activate</h3>
  <p>
    We play the sound by sending an <x-link href="/actions">event action</x-link> with
    start command. We can use the <x-link href="/components/x-action-activator">
    <b>&lt;x-action-activator&gt;</b></x-link> component and special
    <x-link href="/components/x-audio-sound-action"><b>&lt;x-audio-sound-action&gt;</b></x-link>
    elements with the command, and track-id.
  </p>
  <p>
    <x-action-activator
      activate="OnElementEvent"
      multiple>
      <x-audio-sound-action
        command="start"
        track-id="buzzer">
      </x-audio-sound-action>
      <button type="button" class="btn btn-info text-white">
        <i class="ri-play-circle-line"></i>
        Sound
      </button>
    </x-action-activator>
  </p>
  <p>
    <button class="btn btn-light" type="button"
      data-bs-toggle="collapse" data-bs-target="#buttonSource"
      aria-expanded="false" aria-controls="buttonSource">
      <i class="ri-code-s-slash-line"></i>
      View Button Source
    </button>
    <div class="collapse" id="buttonSource">
      <x-markdown>
        <script type="text/markdown">
        ````html
        <x-action-activator
          activate="OnElementEvent"
          multiple>
          <x-audio-sound-action
            command="start"
            track-id="buzzer">
          </x-audio-sound-action>
          <button type="button" class="btn btn-info">Sound</button>
        </x-action-activator>
        ````
        > We set the activator to **multiple** so it allows us to send
        the same action more than once. By default, this is not allowed.
        </script>
      </x-markdown>
    </div>
  </p>



  <div class="x-nav-bottom">
    <button slot="start" x-back class="btn btn-light btn-lg">
      &#x2B9C;
      Back
    </button>
    <button slot="end" x-link="/audio/both" class="btn btn-primary btn-lg">
      Continue
      &#x2B9E;
    </button>
  </div>
</div>
